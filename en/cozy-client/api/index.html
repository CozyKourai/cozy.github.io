<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <meta name="author" content="CozyCloud - https://cozy.io">
        <link rel="canonical" href="https://docs.cozy.io/cozy-client/api/">
        <link rel="shortcut icon" href="../../img/favicon.png">
        
        <title>API reference - Dev Documentation</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
            <link href="../../css/extra.css" rel="stylesheet">
            <link href="../../css/highlight_theme.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://docs.cozy.io/">Dev Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../tutorials/app/">Create Your Application</a>
</li>
                            
<li >
    <a href="../../tutorials/konnector/">Develop a Connector</a>
</li>
                            
<li >
    <a href="../../tutorials/selfhost-debian/">Self-Host on Debian</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">How-to <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">Dev</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../howTos/dev/runCozyDocker/">Run an App in a Cozy using Docker</a>
</li>
            
<li >
    <a href="../../howTos/dev/hmr/">Use Hot Module Replacement in Your App</a>
</li>
            
<li >
    <a href="../../howTos/dev/cordova/">Make a Mobile App Using Cordova</a>
</li>
            
<li >
    <a href="../../howTos/dev/connect-mobile-app-local-stack/">Connect a Mobile App to Your Local Stack</a>
</li>
            
<li >
    <a href="../../howTos/dev/sendmail/">Send and Receive E-mails in Development</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Synchronize</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../howTos/sync/linux/">Install Cozy Drive on GNU/Linux</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">References <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../references/tech-intro/">Technical introduction to the Cozy platform</a>
</li>
                            
<li >
    <a href="../../references/git-flow/">Our Front-End Git Flow</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Stack and tools</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">cozy-app-publish</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-app-publish/README/">CLI & Workflow</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-apps-registry</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-apps-registry/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-client</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../getting-started/">Getting started</a>
</li>
            
<li >
    <a href="../how-tos/">How tos</a>
</li>
            
<li class="active">
    <a href="./">API reference</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-client-js</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-client-js/README/">README</a>
</li>
            
<li >
    <a href="../../cozy-client-js/intro/">Introduction</a>
</li>
            
<li >
    <a href="../../cozy-client-js/browser-sdk-transition/">Transition from cozy-browser-sdk</a>
</li>
            
<li >
    <a href="../../cozy-client-js/offline/">How to support offline</a>
</li>
            
<li >
    <a href="../../cozy-client-js/oauth/">OAuth guide</a>
</li>
            
<li >
    <a href="../../cozy-client-js/auth-api/">Authentication API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/data-api/">Data System API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/files-api/">Files API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/jobs-api/">Jobs API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/intents-api/">Intents API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/settings-api/">Settings API</a>
</li>
            
<li >
    <a href="../../cozy-client-js/sharing-api/">Sharing API</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-ui</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-ui/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-doctypes</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-doctypes/docs/README/">README</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.accounts/">Accounts</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.photos.albums/">Albums</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.bank/">Banking doctypes</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.bills/">Bills</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.konnectors/">Connectors</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.contacts/">Contacts</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.files/">Files</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.notifications/">Notifications</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.remote.requests/">Remote requests</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.sessions.logins/">Session logins</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.sharings/">Sharings</a>
</li>
            
<li >
    <a href="../../cozy-doctypes/docs/io.cozy.triggers/">Triggers</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-konnector-libs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-konnector-libs/api/">API</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/cli/">CLI</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/dev/">Develop</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/errors/">Errors</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/operation-linking/">Operation linking</a>
</li>
            
<li >
    <a href="../../cozy-konnector-libs/synchronization/">Synchronization</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-stack</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-stack/README/">README</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Architecture</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-stack/architecture/">General overview</a>
</li>
            
<li >
    <a href="../../cozy-stack/security/">Security</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Usage</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-stack/INSTALL/">Install the cozy-stack</a>
</li>
            
<li >
    <a href="../../cozy-stack/cli/cozy-stack/">Manpages of the command-line tool</a>
</li>
            
<li >
    <a href="../../cozy-stack/config/">Configuration file</a>
</li>
            
<li >
    <a href="../../cozy-stack/instance/">Managing Instances</a>
</li>
            
<li >
    <a href="../../cozy-stack/onboarding/">Onboarding</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">For developpers</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-stack/client-app-dev/">Develop a client-side app</a>
</li>
            
<li >
    <a href="../../cozy-stack/docker/">Running and building Docker images</a>
</li>
            
<li >
    <a href="../../cozy-stack/assets/">Working with the stacka assets</a>
</li>
            
<li >
    <a href="../../cozy-stack/release/">Build a release</a>
</li>
            
<li >
    <a href="../../cozy-stack/CONTRIBUTING/">The contributing guide</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Services</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-stack/auth/">/auth - Authentication & OAuth</a>
</li>
            
<li >
    <a href="../../cozy-stack/apps/">/apps - Applications Management</a>
</li>
            
<li >
    <a href="../../cozy-stack/registry/"> /apps - Apps registry</a>
</li>
            
<li >
    <a href="../../cozy-stack/konnectors/"> /apps - Konnectors</a>
</li>
            
<li >
    <a href="../../cozy-stack/konnectors-workflow/"> /apps - Konnectors workflow</a>
</li>
            
<li >
    <a href="../../cozy-stack/data-system/">/data - Data System</a>
</li>
            
<li >
    <a href="../../cozy-stack/mango/"> /data - Mango</a>
</li>
            
<li >
    <a href="../../cozy-stack/replication/"> /data - Replication</a>
</li>
            
<li >
    <a href="../../cozy-stack/couchdb-quirks/"> /data - CouchDB Quirks</a>
</li>
            
<li >
    <a href="../../cozy-stack/pouchdb-quirks/"> /data - PouchDB Quirks</a>
</li>
            
<li >
    <a href="../../cozy-stack/files/">/files - Virtual File System</a>
</li>
            
<li >
    <a href="../../cozy-stack/references-docs-in-vfs/"> /files - References of documents in VFS</a>
</li>
            
<li >
    <a href="../../cozy-stack/intents/">/intents - Intents</a>
</li>
            
<li >
    <a href="../../cozy-stack/jobs/">/jobs - Jobs</a>
</li>
            
<li >
    <a href="../../cozy-stack/workers/"> /jobs - Workers</a>
</li>
            
<li >
    <a href="../../cozy-stack/move/">/move - Move, export and import an instance</a>
</li>
            
<li >
    <a href="../../cozy-stack/notifications/">/notifications - Notifications</a>
</li>
            
<li >
    <a href="../../cozy-stack/permissions/">/permissions - Permissions</a>
</li>
            
<li >
    <a href="../../cozy-stack/realtime/">/realtime - Realtime</a>
</li>
            
<li >
    <a href="../../cozy-stack/remote/">/remote - Proxy for remote data/API</a>
</li>
            
<li >
    <a href="../../cozy-stack/settings/">/settings - Settings</a>
</li>
            
<li >
    <a href="../../cozy-stack/user-action-required/"> /settings - Terms of Services</a>
</li>
            
<li >
    <a href="../../cozy-stack/sharing/">/sharings - Sharing</a>
</li>
            
<li >
    <a href="../../cozy-stack/sharing-design/"> /sharings - Request for comments</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">konitor</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../konitor/cli/">CLI</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">babel-preset-cozy-app</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../babel-preset-cozy-app/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">commitlint-config-cozy</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../commitlint-config-cozy/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-device-helper</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-device-helper/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">eslint-config-cozy-app</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../eslint-config-cozy-app/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-flags</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-flags/README/">README</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">cozy-realtime</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cozy-realtime/README/">README</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li>
                        <a href="https://github.com/cozy/cozy.github.io/">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3 main-toc">
<div class="bs-sidebar hidden-print affix" role="complementary">
    <ul class="nav bs-sidenav well" style='padding-left: 0; padding-right: 0; margin-bottom: 1.5rem'>
        <li class="main active"><a href="#modules">Modules</a></li>
        <li class="main "><a href="#constants">Constants</a></li>
        <li class="main "><a href="#functions">Functions</a></li>
        <li class="main "><a href="#cozyclient">CozyClient</a></li>
            <li><a href="#moduleexports">module.exports ⏏</a></li>
        <li class="main "><a href="#querydefinition">QueryDefinition</a></li>
            <li><a href="#querydefinitionquerydefinition">QueryDefinition.QueryDefinition</a></li>
        <li class="main "><a href="#appcollection">AppCollection</a></li>
            <li><a href="#appcollectionall-object">appCollection.all() ⇒ Object</a></li>
        <li class="main "><a href="#cozystackclient">CozyStackClient</a></li>
            <li><a href="#cozystackclientcollectiondoctype-documentcollection">cozyStackClient.collection(doctype) ⇒ DocumentCollection</a></li>
            <li><a href="#cozystackclientfetchmethod-path-body-options-object">cozyStackClient.fetch(method, path, body, options) ⇒ Object</a></li>
            <li><a href="#cozystackclientfetchjsonmethod-path-body-options-object">cozyStackClient.fetchJSON(method, path, body, options) ⇒ Object</a></li>
        <li class="main "><a href="#documentcollection">DocumentCollection</a></li>
            <li><a href="#documentcollectionalloptions-object">documentCollection.all(options) ⇒ Object</a></li>
            <li><a href="#documentcollectionfindselector-options-object">documentCollection.find(selector, options) ⇒ Object</a></li>
            <li><a href="#documentcollectiongetindexfieldsoptions-array">documentCollection.getIndexFields(options) ⇒ Array</a></li>
        <li class="main "><a href="#filecollection">FileCollection</a></li>
            <li><a href="#filecollectionfindselector-options-object">fileCollection.find(selector, options) ⇒ Object</a></li>
            <li><a href="#filecollectionfindreferencedbydocument-limit-object">fileCollection.findReferencedBy(document, {, limit) ⇒ object</a></li>
            <li><a href="#filecollectioncreatedirectorybypathpath-object">fileCollection.createDirectoryByPath(path) ⇒ object</a></li>
            <li><a href="#filecollectionupdatefilemetadataid-attributes-object">fileCollection.updateFileMetadata(id, attributes) ⇒ object</a></li>
        <li class="main "><a href="#oauthclient">OAuthClient</a></li>
            <li><a href="#oauthclientregister-promise">oAuthClient.register() ⇒ promise</a></li>
            <li><a href="#oauthclientunregister-promise">oAuthClient.unregister() ⇒ promise</a></li>
            <li><a href="#oauthclientfetchinformation-promise">oAuthClient.fetchInformation() ⇒ promise</a></li>
            <li><a href="#oauthclientupdateinformationinformation-resetsecret-promise">oAuthClient.updateInformation(information, resetSecret) ⇒ promise</a></li>
            <li><a href="#oauthclientgeneratestatecode-string">oAuthClient.generateStateCode() ⇒ string</a></li>
            <li><a href="#oauthclientgetauthcodeurlstatecode-scopes-string">oAuthClient.getAuthCodeURL(stateCode, scopes) ⇒ string</a></li>
            <li><a href="#oauthclientgetaccesscodefromurlpageurl-statecode-string">oAuthClient.getAccessCodeFromURL(pageURL, stateCode) ⇒ string</a></li>
            <li><a href="#oauthclientfetchaccesstokenaccesscode-promise">oAuthClient.fetchAccessToken(accessCode) ⇒ Promise</a></li>
            <li><a href="#oauthclientrefreshtoken-promise">oAuthClient.refreshToken() ⇒ Promise</a></li>
            <li><a href="#oauthclientsetcredentialstoken">oAuthClient.setCredentials(token)</a></li>
            <li><a href="#oauthclientsetoauthoptionsoptions">oAuthClient.setOAuthOptions(options)</a></li>
        <li class="main "><a href="#permissioncollection">PermissionCollection</a></li>
            <li><a href="#permissioncollectiongetownpermissions-object">permissionCollection.getOwnPermissions() ⇒ object</a></li>
        <li class="main "><a href="#sharingcollection">SharingCollection</a></li>
            <li><a href="#sharingcollectionsharedocument-recipients-sharingtype-description-previewpath">sharingCollection.share(document, recipients, sharingType, description, [previewPath])</a></li>
            <li><a href="#sharingcollectiongetdiscoverylinksharingid-sharecode-string">sharingCollection.getDiscoveryLink(sharingId, sharecode) ⇒ string</a></li>
        <li class="main "><a href="#resolveclass">resolveClass</a></li>
        <li class="main "><a href="#encode">encode</a></li>
        <li class="main "><a href="#buildurl">buildURL</a></li>
        <li class="main "><a href="#addbyid">addById()</a></li>
        <li class="main "><a href="#withclientcomponent-function">withClient(Component) ⇒ function</a></li>
        <li class="main "><a href="#queryconnectqueryspecs-function">queryConnect(querySpecs) ⇒ function</a></li>
        <li class="main "><a href="#optimizedoctypequeriesqueries-arrayquerydefinition">optimizeDoctypeQueries(queries) ⇒ Array.&lt;QueryDefinition&gt;</a></li>
        <li class="main "><a href="#optimizequeriesqueries-arrayquerydefinition">optimizeQueries(queries) ⇒ Array.&lt;QueryDefinition&gt;</a></li>
        <li class="main "><a href="#normalizedoctypeschema">normalizeDoctypeSchema()</a></li>
        <li class="main "><a href="#getdoctypeschema">getDoctypeSchema()</a></li>
        <li class="main "><a href="#getrelationship">getRelationship()</a></li>
        <li class="main "><a href="#validate">validate()</a></li>
        <li class="main "><a href="#handleonsync">handleOnSync()</a></li>
        <li class="main "><a href="#startreplication-void">startReplication() ⇒ void</a></li>
        <li class="main "><a href="#stopreplication-void">stopReplication() ⇒ void</a></li>
        <li class="main "><a href="#defaultselectoroptions-array">defaultSelector(options) ⇒ Array</a></li>
        <li class="main "><a href="#ensuredatabasesexist">ensureDatabasesExist()</a></li>
        <li class="main "><a href="#startreplicationloop">startReplicationLoop()</a></li>
        <li class="main "><a href="#stopreplicationloop">stopReplicationLoop()</a></li>
        <li class="main "><a href="#replicateonce">replicateOnce()</a></li>
        <li class="main "><a href="#setintervalpromise">setIntervalPromise()</a></li>
        <li class="main "><a href="#uri">uri()</a></li>
        <li class="main "><a href="#attempt">attempt()</a></li>
        <li class="main "><a href="#sleep">sleep()</a></li>
    </ul>
  <div style='padding-left: 2rem'>
    
    <a id='edit-link' href='https://github.com/cozy/cozy.github.io/edit/dev/src/cozy-client/api.md'>Edit documentation</a>
    <script type='text/javascript'>
        /* Here we detect if the current page is from an external documentation and we 
        change the href of the editing link so it goes to the right repository and file */
        const outsideDocs = [{"name": "cozy-app-publish", "repo": "https://github.com/cozy/cozy-app-publish.git", "subdir": "."}, {"name": "cozy-apps-registry", "repo": "https://github.com/cozy/cozy-apps-registry.git", "subdir": "."}, {"name": "cozy-client", "repo": "https://github.com/cozy/cozy-client.git", "subdir": "docs"}, {"name": "cozy-client-js", "repo": "https://github.com/cozy/cozy-client-js.git", "subdir": "docs"}, {"name": "cozy-ui", "repo": "https://github.com/cozy/cozy-ui.git", "subdir": "docs"}, {"name": "cozy-doctypes", "repo": "https://github.com/cozy/cozy-doctypes.git", "subdir": "."}, {"name": "cozy-konnector-libs", "repo": "https://github.com/konnectors/libs.git", "subdir": "packages/cozy-konnector-libs/docs"}, {"name": "cozy-scripts", "repo": "https://github.com/CPatchane/create-cozy-app.git", "subdir": "packages/cozy-scripts/docs"}, {"name": "cozy-stack", "repo": "https://github.com/cozy/cozy-stack.git", "subdir": "docs"}, {"name": "konitor", "repo": "https://github.com/konnectors/konitor.git", "subdir": "docs"}, {"name": "babel-preset-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/babel-preset-cozy-app"}, {"name": "commitlint-config-cozy", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/commitlint-config-cozy"}, {"name": "cozy-device-helper", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-device-helper"}, {"name": "eslint-config-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/eslint-config-cozy-app"}, {"name": "cozy-flags", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-flags"}, {"name": "cozy-realtime", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-realtime"}]
        const editNode = document.querySelector('#edit-link')
        const pathname = window.location.pathname
        const editURI = 'edit/master/'
        const removeGitSuffix = function (x) { return x.replace(/\.git$/, '') }

        // Returns the external repo associated to a pathname
        const detectExternalRepo = function (pathname) {
            for (var outsideDoc of outsideDocs) {
                if (window.location.pathname.includes('/' + outsideDoc.name + '/')) {
                    return outsideDoc
                }
            }
        }

        // Change the href attribute of a link to point to the correct edition page on GitHub
        // for the passed external documentation
        const fixEditLink = function (editNode, externalDoc) {
            const repoFile = pathname.replace('/en/' + externalDoc.name, '').replace(/\/$/, '.md')
            const baseRepo = removeGitSuffix(externalDoc.repo)
            editNode.href = baseRepo + '/' + editURI + externalDoc.subdir + repoFile
        }

        const externalRepo = detectExternalRepo(pathname)
        if (externalRepo) {
            fixEditLink(editNode, externalRepo)
        }
    </script>
    
  </div>
</div></div>
                <div class="col-md-9" role="main">
                    

<h2 id="modules">Modules<a class="headerlink" href="#modules" title="Permanent link">&para;</a></h2>
<dl>
<dt><a href="#module_CozyClient">CozyClient</a></dt>
<dd></dd>
<dt><a href="#module_QueryDefinition">QueryDefinition</a></dt>
<dd><p>API to query documents</p>
</dd>
<dt><a href="#module_AppCollection">AppCollection</a></dt>
<dd></dd>
<dt><a href="#module_CozyStackClient">CozyStackClient</a></dt>
<dd></dd>
<dt><a href="#module_DocumentCollection">DocumentCollection</a></dt>
<dd><p>Abstracts a collection of documents of the same doctype, providing CRUD methods and other helpers.</p>
</dd>
<dt><a href="#module_FileCollection">FileCollection</a></dt>
<dd><p>Abstracts a collection of files</p>
<p>Files are a special type of documents and are handled differently by the stack:
special routes are to be used, and there is a notion of referenced files, aka
files associated to a specific document</p>
</dd>
<dt><a href="#module_OAuthClient">OAuthClient</a></dt>
<dd></dd>
<dt><a href="#module_PermissionCollection">PermissionCollection</a></dt>
<dd><p>Interact with permissions</p>
</dd>
<dt><a href="#module_SharingCollection">SharingCollection</a></dt>
<dd><p>Interact with sharing doctypes</p>
</dd>
</dl>

<h2 id="constants">Constants<a class="headerlink" href="#constants" title="Permanent link">&para;</a></h2>
<dl>
<dt><a href="#resolveClass">resolveClass</a></dt>
<dd><p>Returns the relationship class for a given doctype/type.</p>
<p>In the schema definition, some classes have string aliases
so you do not have to import directly the association.</p>
<p>Some doctypes can have built-in overriden relationships.</p>
</dd>
<dt><a href="#encode">encode</a></dt>
<dd><p>Encode an object as querystring, values are encoded as
URI components, keys are not.</p>
</dd>
<dt><a href="#buildURL">buildURL</a></dt>
<dd><p>Returns a URL from base url and a query parameter object.
Any undefined parameter is removed.</p>
</dd>
</dl>

<h2 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h2>
<dl>
<dt><a href="#addById">addById()</a></dt>
<dd><p>Add a referenced document by id. You need to call save()
in order to synchronize your document with the store</p>
</dd>
<dt><a href="#withClient">withClient(Component)</a> ⇒ <code>function</code></dt>
<dd><p>HOC to provide client from context as prop</p>
</dd>
<dt><a href="#queryConnect">queryConnect(querySpecs)</a> ⇒ <code>function</code></dt>
<dd><p>HOC creator to connect component to several queries in a declarative manner</p>
</dd>
<dt><a href="#optimizeDoctypeQueries">optimizeDoctypeQueries(queries)</a> ⇒ <code>Array.&lt;QueryDefinition&gt;</code></dt>
<dd><p>Optimize queries on a single doctype</p>
</dd>
<dt><a href="#optimizeQueries">optimizeQueries(queries)</a> ⇒ <code>Array.&lt;QueryDefinition&gt;</code></dt>
<dd><p>Reduce the number of queries used to fetch documents.</p>
<ul>
<li>Deduplication of queries</li>
<li>Groups id queries</li>
</ul>
</dd>
<dt><a href="#normalizeDoctypeSchema">normalizeDoctypeSchema()</a></dt>
<dd><p>Returns a normalized schema object from the schema definition.</p>
<ul>
<li>Relationships are resolved to classes if needed</li>
<li>The name of the relationship (its key in the schema definition)
is included in the relationship</li>
<li>Empty relationships are nulled</li>
</ul>
</dd>
<dt><a href="#getDoctypeSchema">getDoctypeSchema()</a></dt>
<dd><p>Returns the schema for a doctype</p>
</dd>
<dt><a href="#getRelationship">getRelationship()</a></dt>
<dd><p>Returns the relationship for a given doctype/name</p>
</dd>
<dt><a href="#validate">validate()</a></dt>
<dd><p>Validates a document considering the descriptions in schema.attributes.</p>
</dd>
<dt><a href="#handleOnSync">handleOnSync()</a></dt>
<dd><p>Receives PouchDB updates (documents grouped by doctype).
Normalizes the data (.id -&gt; ._id, .rev -&gt; _rev).
Passes the data to the client and to the onSync handler.</p>
</dd>
<dt><a href="#startReplication">startReplication()</a> ⇒ <code>void</code></dt>
<dd><p>User of the link can call this to start ongoing replications.
Typically, it can be used when the application regains focus.</p>
</dd>
<dt><a href="#stopReplication">stopReplication()</a> ⇒ <code>void</code></dt>
<dd><p>User of the link can call this to stop ongoing replications.
Typically, it can be used when the applications loses focus.</p>
</dd>
<dt><a href="#defaultSelector">defaultSelector(options)</a> ⇒ <code>Array</code></dt>
<dd><p>Compute fields that should be indexed for a mango
query to work</p>
</dd>
<dt><a href="#ensureDatabasesExist">ensureDatabasesExist()</a></dt>
<dd><p>Via a call to info() we ensure the database exist on the
remote side. This is done only once since after the first
call, we are sure that the databases have been created.</p>
</dd>
<dt><a href="#startReplicationLoop">startReplicationLoop()</a></dt>
<dd><p>Starts periodic syncing of the pouches</p>
</dd>
<dt><a href="#stopReplicationLoop">stopReplicationLoop()</a></dt>
<dd><p>Stop periodic syncing of the pouches</p>
</dd>
<dt><a href="#replicateOnce">replicateOnce()</a></dt>
<dd><p>Starts replication</p>
</dd>
<dt><a href="#setIntervalPromise">setIntervalPromise()</a></dt>
<dd><p>Will periodically run a function so that when the promise
is resolved, the next function is called after <delay>ms.</p>
<p>Returns a function which cancels the periodic calling.
When canceled, if there is an ongoing promise, it will
continue.</p>
</dd>
<dt><a href="#uri">uri()</a></dt>
<dd><p>Template tag function for URIs encoding</p>
<p>Will automatically apply <code>encodeURIComponent</code> to template literal placeholders</p>
</dd>
<dt><a href="#attempt">attempt()</a></dt>
<dd><p>Helps to avoid nested try/catch when using async/await</p>
<p>Inspired by a Go pattern: <a href="http://blog.grossman.io/how-to-write-async-await-without-try-catch-blocks-in-javascript/">http://blog.grossman.io/how-to-write-async-await-without-try-catch-blocks-in-javascript/</a></p>
</dd>
<dt><a href="#sleep">sleep()</a></dt>
<dd><p>Helps to avoid nested try/catch when using async/await — see documentation for attemp</p>
</dd>
</dl>

<p><a name="module_CozyClient"></a></p>
<h2 id="cozyclient">CozyClient<a class="headerlink" href="#cozyclient" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#module_CozyClient">CozyClient</a><ul>
<li><a href="#exp_module_CozyClient--module.exports">module.exports</a> ⏏<ul>
<li><a href="#new_module_CozyClient--module.exports_new">new module.exports(options)</a></li>
<li><a href="#module_CozyClient--module.exports+collection">.collection(doctype)</a> ⇒ <code>DocumentCollection</code></li>
<li><a href="#module_CozyClient--module.exports+getDocumentSavePlan">.getDocumentSavePlan(document, relationships)</a> ⇒ <code>Array.&lt;object&gt;</code></li>
<li><a href="#module_CozyClient--module.exports+fetchRelationships">.fetchRelationships()</a></li>
<li><a href="#module_CozyClient--module.exports+hydrateDocument">.hydrateDocument()</a></li>
<li><a href="#module_CozyClient--module.exports+makeNewDocument">.makeNewDocument()</a></li>
<li><a href="#module_CozyClient--module.exports+getAssociation">.getAssociation()</a></li>
<li><a href="#module_CozyClient--module.exports+getRelationshipStoreAccessors">.getRelationshipStoreAccessors()</a></li>
<li><a href="#module_CozyClient--module.exports+register">.register(cozyURL)</a> ⇒ <code>object</code></li>
<li><a href="#module_CozyClient--module.exports+startOAuthFlow">.startOAuthFlow(openURLCallback)</a> ⇒ <code>object</code></li>
<li><a href="#module_CozyClient--module.exports+renewAuthorization">.renewAuthorization()</a> ⇒ <code>object</code></li>
<li><a href="#module_CozyClient--module.exports+setData">.setData(data)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="exp_module_CozyClient--module.exports"></a></p>
<h3 id="moduleexports">module.exports ⏏<a class="headerlink" href="#moduleexports" title="Permanent link">&para;</a></h3>
<p><strong>Kind</strong>: Exported class<br />
<a name="new_module_CozyClient--module.exports_new"></a></p>
<h4 id="new-moduleexportsoptions">new module.exports(options)<a class="headerlink" href="#new-moduleexportsoptions" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td></td>
</tr>
<tr>
<td>options.link</td>
<td><code>Link</code></td>
<td>Backward compatibility</td>
</tr>
<tr>
<td>options.links</td>
<td><code>Array.Link</code></td>
<td>List of links</td>
</tr>
<tr>
<td>options.schema</td>
<td><code>Object</code></td>
<td>Schema description for each doctypes</td>
</tr>
</tbody>
</table>
<p><a name="module_CozyClient--module.exports+collection"></a></p>
<h4 id="moduleexportscollectiondoctype-documentcollection">module.exports.collection(doctype) ⇒ <code>DocumentCollection</code><a class="headerlink" href="#moduleexportscollectiondoctype-documentcollection" title="Permanent link">&para;</a></h4>
<p>Forwards to a stack client instance and returns
a <a href="../DocumentCollection">DocumentCollection</a> instance.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>doctype</td>
<td><code>String</code></td>
<td>The collection doctype.</td>
</tr>
</tbody>
</table>
<p><a name="module_CozyClient--module.exports+getDocumentSavePlan"></a></p>
<h4 id="moduleexportsgetdocumentsaveplandocument-relationships-arrayobject">module.exports.getDocumentSavePlan(document, relationships) ⇒ <code>Array.&lt;object&gt;</code><a class="headerlink" href="#moduleexportsgetdocumentsaveplandocument-relationships-arrayobject" title="Permanent link">&para;</a></h4>
<p>getDocumentSavePlan - Creates a list of mutations to execute to create a document and its relationships.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a><br />
<strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - One or more mutation to execute  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>document</td>
<td><code>object</code></td>
<td>The base document to create</td>
</tr>
<tr>
<td>relationships</td>
<td><code>object</code></td>
<td>The list of relationships to add, as a dictionnary. Keys should be relationship names and values the documents to link.</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">baseDoc</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">_type</span><span class="o">:</span> <span class="s1">&#39;io.cozy.todo&#39;</span><span class="p">,</span> <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Go hiking&#39;</span> <span class="p">}</span>
<span class="c1">// relations can be arrays or single objects</span>
<span class="kr">const</span> <span class="nx">relationships</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">attachments</span><span class="o">:</span> <span class="p">[{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">12345</span><span class="p">,</span> <span class="nx">_type</span><span class="o">:</span> <span class="s1">&#39;io.cozy.files&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">6789</span><span class="p">,</span> <span class="nx">_type</span><span class="o">:</span> <span class="s1">&#39;io.cozy.files&#39;</span> <span class="p">}],</span>
  <span class="nx">bills</span><span class="o">:</span> <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">9999</span><span class="p">,</span> <span class="nx">_type</span><span class="o">:</span> <span class="s1">&#39;io.cozy.bills&#39;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">getDocumentSavePlan</span><span class="p">(</span><span class="nx">baseDoc</span><span class="p">,</span> <span class="nx">relationships</span><span class="p">)</span>
</pre></div>


<p><a name="module_CozyClient--module.exports+fetchRelationships"></a></p>
<h4 id="moduleexportsfetchrelationships">module.exports.fetchRelationships()<a class="headerlink" href="#moduleexportsfetchrelationships" title="Permanent link">&para;</a></h4>
<p>Fetch relationships for a response (can be several docs).
Fills the <code>relationships</code> attribute of each documents.</p>
<p>Can potentially result in several fetch requests.
Queries are optimized before being sent.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a><br />
<a name="module_CozyClient--module.exports+hydrateDocument"></a></p>
<h4 id="moduleexportshydratedocument">module.exports.hydrateDocument()<a class="headerlink" href="#moduleexportshydratedocument" title="Permanent link">&para;</a></h4>
<p>Instantiate relationships on a document</p>
<p>The original document is kept in the target attribute of
the relationship</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a><br />
<a name="module_CozyClient--module.exports+makeNewDocument"></a></p>
<h4 id="moduleexportsmakenewdocument">module.exports.makeNewDocument()<a class="headerlink" href="#moduleexportsmakenewdocument" title="Permanent link">&para;</a></h4>
<p>Creates (locally) a new document for the given doctype.
This document is hydrated : its relationships are there
and working.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a><br />
<a name="module_CozyClient--module.exports+getAssociation"></a></p>
<h4 id="moduleexportsgetassociation">module.exports.getAssociation()<a class="headerlink" href="#moduleexportsgetassociation" title="Permanent link">&para;</a></h4>
<p>Creates an association that is linked to the store.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a><br />
<a name="module_CozyClient--module.exports+getRelationshipStoreAccessors"></a></p>
<h4 id="moduleexportsgetrelationshipstoreaccessors">module.exports.getRelationshipStoreAccessors()<a class="headerlink" href="#moduleexportsgetrelationshipstoreaccessors" title="Permanent link">&para;</a></h4>
<p>Returns the accessors that are given to the relationships for them
to deal with the stores.</p>
<p>Relationships need to have access to the store to ping it when
a modification (addById/removeById etc&hellip;) has been done. This wakes
the store up, which in turn will update the <Query>s and re-render the data.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a><br />
<a name="module_CozyClient--module.exports+register"></a></p>
<h4 id="moduleexportsregistercozyurl-object">module.exports.register(cozyURL) ⇒ <code>object</code><a class="headerlink" href="#moduleexportsregistercozyurl-object" title="Permanent link">&para;</a></h4>
<p>Performs a complete OAuth flow using a Cordova webview for auth.
The <code>register</code> method&rsquo;s name has been chosen for compat reasons with the Authentication compo.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a><br />
<strong>Returns</strong>: <code>object</code> - Contains the fetched token and the client information.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cozyURL</td>
<td><code>string</code></td>
<td>Receives the URL of the cozy instance.</td>
</tr>
</tbody>
</table>
<p><a name="module_CozyClient--module.exports+startOAuthFlow"></a></p>
<h4 id="moduleexportsstartoauthflowopenurlcallback-object">module.exports.startOAuthFlow(openURLCallback) ⇒ <code>object</code><a class="headerlink" href="#moduleexportsstartoauthflowopenurlcallback-object" title="Permanent link">&para;</a></h4>
<p>Performs a complete OAuth flow, including upating the internal token at the end.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a><br />
<strong>Returns</strong>: <code>object</code> - Contains the fetched token and the client information. These should be stored and used to restore the client.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>openURLCallback</td>
<td><code>function</code></td>
<td>Receives the URL to present to the user as a parameter, and should return a promise that resolves with the URL the user was redirected to after accepting the permissions.</td>
</tr>
</tbody>
</table>
<p><a name="module_CozyClient--module.exports+renewAuthorization"></a></p>
<h4 id="moduleexportsrenewauthorization-object">module.exports.renewAuthorization() ⇒ <code>object</code><a class="headerlink" href="#moduleexportsrenewauthorization-object" title="Permanent link">&para;</a></h4>
<p>Renews the token if, for instance, new permissions are required or token
has expired.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a><br />
<strong>Returns</strong>: <code>object</code> - Contains the fetched token and the client information.<br />
<a name="module_CozyClient--module.exports+setData"></a></p>
<h4 id="moduleexportssetdatadata">module.exports.setData(data)<a class="headerlink" href="#moduleexportssetdatadata" title="Permanent link">&para;</a></h4>
<p>Directly set the data in the store, without using a query
This is useful for cases like Pouch replication, which wants to
set some data in the store.</p>
<p><strong>Kind</strong>: instance method of <a href="#exp_module_CozyClient--module.exports"><code>module.exports</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td><code>Object</code></td>
<td _data_="[data]" doctype:="doctype:"></td>
</tr>
</tbody>
</table>
<p><a name="module_QueryDefinition"></a></p>
<h2 id="querydefinition">QueryDefinition<a class="headerlink" href="#querydefinition" title="Permanent link">&para;</a></h2>
<p>API to query documents</p>
<ul>
<li><a href="#module_QueryDefinition">QueryDefinition</a><ul>
<li><a href="#module_QueryDefinition.QueryDefinition">.QueryDefinition</a><ul>
<li><a href="#new_module_QueryDefinition.QueryDefinition_new">new exports.QueryDefinition(doctype, id, ids, selector, fields, indexedFields, sort, includes, referenced, limit, skip)</a></li>
<li><a href="#module_QueryDefinition.QueryDefinition+where">.where(selector)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+select">.select(fields)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+indexFields">.indexFields(fields)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+sortBy">.sortBy(sort)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+include">.include(includes)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+limitBy">.limitBy(limit)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+offset">.offset(skip)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+referencedBy">.referencedBy(document)</a> ⇒ <code>QueryDefinition</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="module_QueryDefinition.QueryDefinition"></a></p>
<h3 id="querydefinitionquerydefinition">QueryDefinition.QueryDefinition<a class="headerlink" href="#querydefinitionquerydefinition" title="Permanent link">&para;</a></h3>
<p><strong>Kind</strong>: static class of <a href="#module_QueryDefinition"><code>QueryDefinition</code></a>  </p>
<ul>
<li><a href="#module_QueryDefinition.QueryDefinition">.QueryDefinition</a><ul>
<li><a href="#new_module_QueryDefinition.QueryDefinition_new">new exports.QueryDefinition(doctype, id, ids, selector, fields, indexedFields, sort, includes, referenced, limit, skip)</a></li>
<li><a href="#module_QueryDefinition.QueryDefinition+where">.where(selector)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+select">.select(fields)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+indexFields">.indexFields(fields)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+sortBy">.sortBy(sort)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+include">.include(includes)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+limitBy">.limitBy(limit)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+offset">.offset(skip)</a> ⇒ <code>QueryDefinition</code></li>
<li><a href="#module_QueryDefinition.QueryDefinition+referencedBy">.referencedBy(document)</a> ⇒ <code>QueryDefinition</code></li>
</ul>
</li>
</ul>
<p><a name="new_module_QueryDefinition.QueryDefinition_new"></a></p>
<h4 id="new-exportsquerydefinitiondoctype-id-ids-selector-fields-indexedfields-sort-includes-referenced-limit-skip">new exports.QueryDefinition(doctype, id, ids, selector, fields, indexedFields, sort, includes, referenced, limit, skip)<a class="headerlink" href="#new-exportsquerydefinitiondoctype-id-ids-selector-fields-indexedfields-sort-includes-referenced-limit-skip" title="Permanent link">&para;</a></h4>
<p>Represents a QueryDefinition.</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>doctype</td>
<td><code>string</code></td>
<td>The doctype of the doc.</td>
</tr>
<tr>
<td>id</td>
<td><code>string</code></td>
<td>The id of the doc.</td>
</tr>
<tr>
<td>ids</td>
<td><code>Array</code></td>
<td>The ids of the docs.</td>
</tr>
<tr>
<td>selector</td>
<td><code>Object</code></td>
<td>The selector to query the docs.</td>
</tr>
<tr>
<td>fields</td>
<td><code>Array</code></td>
<td>The fields to return.</td>
</tr>
<tr>
<td>indexedFields</td>
<td><code>Array</code></td>
<td>The fields to index.</td>
</tr>
<tr>
<td>sort</td>
<td><code>Array</code></td>
<td>The sorting params.</td>
</tr>
<tr>
<td>includes</td>
<td><code>string</code></td>
<td>The docs to include.</td>
</tr>
<tr>
<td>referenced</td>
<td><code>string</code></td>
<td>The referenced document.</td>
</tr>
<tr>
<td>limit</td>
<td><code>number</code></td>
<td>The document&rsquo;s limit to return.</td>
</tr>
<tr>
<td>skip</td>
<td><code>number</code></td>
<td>The number of docs to skip.</td>
</tr>
</tbody>
</table>
<p><a name="module_QueryDefinition.QueryDefinition+where"></a></p>
<h4 id="querydefinitionwhereselector-querydefinition">queryDefinition.where(selector) ⇒ <code>QueryDefinition</code><a class="headerlink" href="#querydefinitionwhereselector-querydefinition" title="Permanent link">&para;</a></h4>
<p>Query documents with a <a href="http://docs.couchdb.org/en/latest/api/database/find.html#find-selectors">mango selector</a>.
Each field passed in the selector will be indexed, except if the indexField option is used.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_QueryDefinition.QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <code>QueryDefinition</code> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>selector</td>
<td><code>Object</code></td>
<td>The Mango selector.</td>
</tr>
</tbody>
</table>
<p><a name="module_QueryDefinition.QueryDefinition+select"></a></p>
<h4 id="querydefinitionselectfields-querydefinition">queryDefinition.select(fields) ⇒ <code>QueryDefinition</code><a class="headerlink" href="#querydefinitionselectfields-querydefinition" title="Permanent link">&para;</a></h4>
<p>Specify which fields of each object should be returned. If it is omitted, the entire object is returned.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_QueryDefinition.QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <code>QueryDefinition</code> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fields</td>
<td><code>Array</code></td>
<td>The fields to return.</td>
</tr>
</tbody>
</table>
<p><a name="module_QueryDefinition.QueryDefinition+indexFields"></a></p>
<h4 id="querydefinitionindexfieldsfields-querydefinition">queryDefinition.indexFields(fields) ⇒ <code>QueryDefinition</code><a class="headerlink" href="#querydefinitionindexfieldsfields-querydefinition" title="Permanent link">&para;</a></h4>
<p>Specify which fields should be indexed. This prevent the automatic indexing of the mango fields.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_QueryDefinition.QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <code>QueryDefinition</code> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fields</td>
<td><code>Array</code></td>
<td>The fields to index.</td>
</tr>
</tbody>
</table>
<p><a name="module_QueryDefinition.QueryDefinition+sortBy"></a></p>
<h4 id="querydefinitionsortbysort-querydefinition">queryDefinition.sortBy(sort) ⇒ <code>QueryDefinition</code><a class="headerlink" href="#querydefinitionsortbysort-querydefinition" title="Permanent link">&para;</a></h4>
<p>Specify how to sort documents, following the <a href="http://docs.couchdb.org/en/latest/api/database/find.html#find-sort">sort syntax</a></p>
<p><strong>Kind</strong>: instance method of <a href="#module_QueryDefinition.QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <code>QueryDefinition</code> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>sort</td>
<td><code>Array</code></td>
<td>The list of field name and direction pairs.</td>
</tr>
</tbody>
</table>
<p><a name="module_QueryDefinition.QueryDefinition+include"></a></p>
<h4 id="querydefinitionincludeincludes-querydefinition">queryDefinition.include(includes) ⇒ <code>QueryDefinition</code><a class="headerlink" href="#querydefinitionincludeincludes-querydefinition" title="Permanent link">&para;</a></h4>
<p>Includes documents having a relationships with the ones queried.
For example, query albums including the photos.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_QueryDefinition.QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <code>QueryDefinition</code> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>includes</td>
<td><code>Array</code></td>
<td>The documents to include.</td>
</tr>
</tbody>
</table>
<p><a name="module_QueryDefinition.QueryDefinition+limitBy"></a></p>
<h4 id="querydefinitionlimitbylimit-querydefinition">queryDefinition.limitBy(limit) ⇒ <code>QueryDefinition</code><a class="headerlink" href="#querydefinitionlimitbylimit-querydefinition" title="Permanent link">&para;</a></h4>
<p>Maximum number of documents returned, useful for pagination. Default is 100.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_QueryDefinition.QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <code>QueryDefinition</code> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>limit</td>
<td><code>number</code></td>
<td>The document&rsquo;s limit.</td>
</tr>
</tbody>
</table>
<p><a name="module_QueryDefinition.QueryDefinition+offset"></a></p>
<h4 id="querydefinitionoffsetskip-querydefinition">queryDefinition.offset(skip) ⇒ <code>QueryDefinition</code><a class="headerlink" href="#querydefinitionoffsetskip-querydefinition" title="Permanent link">&para;</a></h4>
<p>Skip the first ‘n’ documents, where ‘n’ is the value specified.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_QueryDefinition.QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <code>QueryDefinition</code> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>skip</td>
<td><code>number</code></td>
<td>The number of documents to skip.</td>
</tr>
</tbody>
</table>
<p><a name="module_QueryDefinition.QueryDefinition+referencedBy"></a></p>
<h4 id="querydefinitionreferencedbydocument-querydefinition">queryDefinition.referencedBy(document) ⇒ <code>QueryDefinition</code><a class="headerlink" href="#querydefinitionreferencedbydocument-querydefinition" title="Permanent link">&para;</a></h4>
<p>Use the <a href="https://docs.cozy.io/en/cozy-stack/references-docs-in-vfs/">file reference system</a></p>
<p><strong>Kind</strong>: instance method of <a href="#module_QueryDefinition.QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <code>QueryDefinition</code> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>document</td>
<td><code>Object</code></td>
<td>The reference document</td>
</tr>
</tbody>
</table>
<p><a name="module_AppCollection"></a></p>
<h2 id="appcollection">AppCollection<a class="headerlink" href="#appcollection" title="Permanent link">&para;</a></h2>
<p><a name="module_AppCollection+all"></a></p>
<h3 id="appcollectionall-object">appCollection.all() ⇒ <code>Object</code><a class="headerlink" href="#appcollectionall-object" title="Permanent link">&para;</a></h3>
<p>Lists all apps, without filters.</p>
<p>The returned documents are not paginated by the stack.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_AppCollection"><code>AppCollection</code></a><br />
<strong>Returns</strong>: <code>Object</code> - The JSON API conformant response.<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>FetchError</code> </li>
</ul>
<p><a name="module_CozyStackClient"></a></p>
<h2 id="cozystackclient">CozyStackClient<a class="headerlink" href="#cozystackclient" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#module_CozyStackClient">CozyStackClient</a><ul>
<li><a href="#module_CozyStackClient+collection">.collection(doctype)</a> ⇒ <code>DocumentCollection</code></li>
<li><a href="#module_CozyStackClient+fetch">.fetch(method, path, body, options)</a> ⇒ <code>Object</code></li>
<li><a href="#module_CozyStackClient+fetchJSON">.fetchJSON(method, path, body, options)</a> ⇒ <code>Object</code></li>
</ul>
</li>
</ul>
<p><a name="module_CozyStackClient+collection"></a></p>
<h3 id="cozystackclientcollectiondoctype-documentcollection">cozyStackClient.collection(doctype) ⇒ <code>DocumentCollection</code><a class="headerlink" href="#cozystackclientcollectiondoctype-documentcollection" title="Permanent link">&para;</a></h3>
<p>Creates a <a href="../DocumentCollection">DocumentCollection</a> instance.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_CozyStackClient"><code>CozyStackClient</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>doctype</td>
<td><code>String</code></td>
<td>The collection doctype.</td>
</tr>
</tbody>
</table>
<p><a name="module_CozyStackClient+fetch"></a></p>
<h3 id="cozystackclientfetchmethod-path-body-options-object">cozyStackClient.fetch(method, path, body, options) ⇒ <code>Object</code><a class="headerlink" href="#cozystackclientfetchmethod-path-body-options-object" title="Permanent link">&para;</a></h3>
<p>Fetches an endpoint in an authorized way.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_CozyStackClient"><code>CozyStackClient</code></a><br />
<strong>Throws</strong>:</p>
<ul>
<li><code>FetchError</code> </li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>method</td>
<td><code>String</code></td>
<td>The HTTP method.</td>
</tr>
<tr>
<td>path</td>
<td><code>String</code></td>
<td>The URI.</td>
</tr>
<tr>
<td>body</td>
<td><code>Object</code></td>
<td>The payload.</td>
</tr>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td></td>
</tr>
</tbody>
</table>
<p><a name="module_CozyStackClient+fetchJSON"></a></p>
<h3 id="cozystackclientfetchjsonmethod-path-body-options-object">cozyStackClient.fetchJSON(method, path, body, options) ⇒ <code>Object</code><a class="headerlink" href="#cozystackclientfetchjsonmethod-path-body-options-object" title="Permanent link">&para;</a></h3>
<p>Fetches JSON in an authorized way.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_CozyStackClient"><code>CozyStackClient</code></a><br />
<strong>Throws</strong>:</p>
<ul>
<li><code>FetchError</code> </li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>method</td>
<td><code>String</code></td>
<td>The HTTP method.</td>
</tr>
<tr>
<td>path</td>
<td><code>String</code></td>
<td>The URI.</td>
</tr>
<tr>
<td>body</td>
<td><code>Object</code></td>
<td>The payload.</td>
</tr>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td></td>
</tr>
</tbody>
</table>
<p><a name="module_DocumentCollection"></a></p>
<h2 id="documentcollection">DocumentCollection<a class="headerlink" href="#documentcollection" title="Permanent link">&para;</a></h2>
<p>Abstracts a collection of documents of the same doctype, providing CRUD methods and other helpers.</p>
<ul>
<li><a href="#module_DocumentCollection">DocumentCollection</a><ul>
<li><a href="#module_DocumentCollection+all">.all(options)</a> ⇒ <code>Object</code></li>
<li><a href="#module_DocumentCollection+find">.find(selector, options)</a> ⇒ <code>Object</code></li>
<li><a href="#module_DocumentCollection+getIndexFields">.getIndexFields(options)</a> ⇒ <code>Array</code></li>
</ul>
</li>
</ul>
<p><a name="module_DocumentCollection+all"></a></p>
<h3 id="documentcollectionalloptions-object">documentCollection.all(options) ⇒ <code>Object</code><a class="headerlink" href="#documentcollectionalloptions-object" title="Permanent link">&para;</a></h3>
<p>Lists all documents of the collection, without filters.</p>
<p>The returned documents are paginated by the stack.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_DocumentCollection"><code>DocumentCollection</code></a><br />
<strong>Returns</strong>: <code>Object</code> - The JSON API conformant response.<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>FetchError</code> </li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td>The fetch options: pagination &amp; fetch of specific docs.</td>
</tr>
</tbody>
</table>
<p><a name="module_DocumentCollection+find"></a></p>
<h3 id="documentcollectionfindselector-options-object">documentCollection.find(selector, options) ⇒ <code>Object</code><a class="headerlink" href="#documentcollectionfindselector-options-object" title="Permanent link">&para;</a></h3>
<p>Returns a filtered list of documents using a Mango selector.</p>
<p>The returned documents are paginated by the stack.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_DocumentCollection"><code>DocumentCollection</code></a><br />
<strong>Returns</strong>: <code>Object</code> - The JSON API conformant response.<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>FetchError</code> </li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>selector</td>
<td><code>Object</code></td>
<td>The Mango selector.</td>
</tr>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td>The query options.</td>
</tr>
</tbody>
</table>
<p><a name="module_DocumentCollection+getIndexFields"></a></p>
<h3 id="documentcollectiongetindexfieldsoptions-array">documentCollection.getIndexFields(options) ⇒ <code>Array</code><a class="headerlink" href="#documentcollectiongetindexfieldsoptions-array" title="Permanent link">&para;</a></h3>
<p>Compute fields that should be indexed for a mango
query to work</p>
<p><strong>Kind</strong>: instance method of <a href="#module_DocumentCollection"><code>DocumentCollection</code></a><br />
<strong>Returns</strong>: <code>Array</code> - - Fields to index  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td>Mango query options</td>
</tr>
</tbody>
</table>
<p><a name="module_FileCollection"></a></p>
<h2 id="filecollection">FileCollection<a class="headerlink" href="#filecollection" title="Permanent link">&para;</a></h2>
<p>Abstracts a collection of files</p>
<p>Files are a special type of documents and are handled differently by the stack:
special routes are to be used, and there is a notion of referenced files, aka
files associated to a specific document</p>
<ul>
<li><a href="#module_FileCollection">FileCollection</a><ul>
<li><a href="#module_FileCollection+find">.find(selector, options)</a> ⇒ <code>Object</code></li>
<li><a href="#module_FileCollection+findReferencedBy">.findReferencedBy(document, {, limit)</a> ⇒ <code>object</code></li>
<li><a href="#module_FileCollection+createDirectoryByPath">.createDirectoryByPath(path)</a> ⇒ <code>object</code></li>
<li><a href="#module_FileCollection+updateFileMetadata">.updateFileMetadata(id, attributes)</a> ⇒ <code>object</code></li>
</ul>
</li>
</ul>
<p><a name="module_FileCollection+find"></a></p>
<h3 id="filecollectionfindselector-options-object">fileCollection.find(selector, options) ⇒ <code>Object</code><a class="headerlink" href="#filecollectionfindselector-options-object" title="Permanent link">&para;</a></h3>
<p>Returns a filtered list of documents using a Mango selector.</p>
<p>The returned documents are paginated by the stack.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_FileCollection"><code>FileCollection</code></a><br />
<strong>Returns</strong>: <code>Object</code> - The JSON API conformant response.<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>FetchError</code> </li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>selector</td>
<td><code>Object</code></td>
<td>The Mango selector.</td>
</tr>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td>The query options.</td>
</tr>
</tbody>
</table>
<p><a name="module_FileCollection+findReferencedBy"></a></p>
<h3 id="filecollectionfindreferencedbydocument-limit-object">fileCollection.findReferencedBy(document, {, limit) ⇒ <code>object</code><a class="headerlink" href="#filecollectionfindreferencedbydocument-limit-object" title="Permanent link">&para;</a></h3>
<p>async findReferencedBy - Returns the list of files referenced by a document — see https://docs.cozy.io/en/cozy-stack/references-docs-in-vfs/</p>
<p><strong>Kind</strong>: instance method of <a href="#module_FileCollection"><code>FileCollection</code></a><br />
<strong>Returns</strong>: <code>object</code> - The JSON API conformant response.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>document</td>
<td><code>object</code></td>
<td>A JSON representing a document, with at least a <code>_type</code> and <code>_id</code> field.</td>
</tr>
<tr>
<td>{</td>
<td><code>number</code></td>
<td>skip = 0   For pagination, the number of referenced files to skip</td>
</tr>
<tr>
<td>limit</td>
<td><code>number</code></td>
<td>} For pagination, the number of results to return.</td>
</tr>
</tbody>
</table>
<p><a name="module_FileCollection+createDirectoryByPath"></a></p>
<h3 id="filecollectioncreatedirectorybypathpath-object">fileCollection.createDirectoryByPath(path) ⇒ <code>object</code><a class="headerlink" href="#filecollectioncreatedirectorybypathpath-object" title="Permanent link">&para;</a></h3>
<p>async createDirectoryByPath - Creates one or more folders until the given path exists</p>
<p><strong>Kind</strong>: instance method of <a href="#module_FileCollection"><code>FileCollection</code></a><br />
<strong>Returns</strong>: <code>object</code> - The document corresponding to the last segment of the path  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td>
<td><code>string</code></td>
</tr>
</tbody>
</table>
<p><a name="module_FileCollection+updateFileMetadata"></a></p>
<h3 id="filecollectionupdatefilemetadataid-attributes-object">fileCollection.updateFileMetadata(id, attributes) ⇒ <code>object</code><a class="headerlink" href="#filecollectionupdatefilemetadataid-attributes-object" title="Permanent link">&para;</a></h3>
<p>async updateFileMetadata - Updates a file&rsquo;s metadata</p>
<p><strong>Kind</strong>: instance method of <a href="#module_FileCollection"><code>FileCollection</code></a><br />
<strong>Returns</strong>: <code>object</code> - Updated document  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><code>string</code></td>
<td>File id</td>
</tr>
<tr>
<td>attributes</td>
<td><code>object</code></td>
<td>New file meta data</td>
</tr>
</tbody>
</table>
<p><a name="module_OAuthClient"></a></p>
<h2 id="oauthclient">OAuthClient<a class="headerlink" href="#oauthclient" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#module_OAuthClient">OAuthClient</a><ul>
<li><a href="#module_OAuthClient+register">.register()</a> ⇒ <code>promise</code></li>
<li><a href="#module_OAuthClient+unregister">.unregister()</a> ⇒ <code>promise</code></li>
<li><a href="#module_OAuthClient+fetchInformation">.fetchInformation()</a> ⇒ <code>promise</code></li>
<li><a href="#module_OAuthClient+updateInformation">.updateInformation(information, resetSecret)</a> ⇒ <code>promise</code></li>
<li><a href="#module_OAuthClient+generateStateCode">.generateStateCode()</a> ⇒ <code>string</code></li>
<li><a href="#module_OAuthClient+getAuthCodeURL">.getAuthCodeURL(stateCode, scopes)</a> ⇒ <code>string</code></li>
<li><a href="#module_OAuthClient+getAccessCodeFromURL">.getAccessCodeFromURL(pageURL, stateCode)</a> ⇒ <code>string</code></li>
<li><a href="#module_OAuthClient+fetchAccessToken">.fetchAccessToken(accessCode)</a> ⇒ <code>Promise</code></li>
<li><a href="#module_OAuthClient+refreshToken">.refreshToken()</a> ⇒ <code>Promise</code></li>
<li><a href="#module_OAuthClient+setCredentials">.setCredentials(token)</a></li>
<li><a href="#module_OAuthClient+setOAuthOptions">.setOAuthOptions(options)</a></li>
</ul>
</li>
</ul>
<p><a name="module_OAuthClient+register"></a></p>
<h3 id="oauthclientregister-promise">oAuthClient.register() ⇒ <code>promise</code><a class="headerlink" href="#oauthclientregister-promise" title="Permanent link">&para;</a></h3>
<p>Registers the currenly configured client with the OAuth server.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a><br />
<strong>Returns</strong>: <code>promise</code> - A promise that resolves with a complete list of client information, including client ID and client secret.<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>Error</code> When the client is already registered</li>
</ul>
<p><a name="module_OAuthClient+unregister"></a></p>
<h3 id="oauthclientunregister-promise">oAuthClient.unregister() ⇒ <code>promise</code><a class="headerlink" href="#oauthclientunregister-promise" title="Permanent link">&para;</a></h3>
<p>Unregisters the currenly configured client with the OAuth server.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a><br />
<strong>Throws</strong>:</p>
<ul>
<li><code>NotRegisteredException</code> When the client doesn&rsquo;t have it&rsquo;s registration information</li>
</ul>
<p><a name="module_OAuthClient+fetchInformation"></a></p>
<h3 id="oauthclientfetchinformation-promise">oAuthClient.fetchInformation() ⇒ <code>promise</code><a class="headerlink" href="#oauthclientfetchinformation-promise" title="Permanent link">&para;</a></h3>
<p>Fetches the complete set of client information from the server after it has been registered.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a><br />
<strong>Throws</strong>:</p>
<ul>
<li><code>NotRegisteredException</code> When the client doesn&rsquo;t have it&rsquo;s registration information</li>
</ul>
<p><a name="module_OAuthClient+updateInformation"></a></p>
<h3 id="oauthclientupdateinformationinformation-resetsecret-promise">oAuthClient.updateInformation(information, resetSecret) ⇒ <code>promise</code><a class="headerlink" href="#oauthclientupdateinformationinformation-resetsecret-promise" title="Permanent link">&para;</a></h3>
<p>Overwrites the client own information. This method will update both the local information and the remote information on the OAuth server.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a><br />
<strong>Returns</strong>: <code>promise</code> - A promise that resolves to a complete, updated list of client information<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>NotRegisteredException</code> When the client doesn&rsquo;t have it&rsquo;s registration information</li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>information</td>
<td><code>object</code></td>
<td></td>
<td>Set of information to update. Note that some fields such as <code>clientID</code> can&rsquo;t be updated.</td>
</tr>
<tr>
<td>resetSecret</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
<td>= false Optionnal, whether to reset the client secret or not</td>
</tr>
</tbody>
</table>
<p><a name="module_OAuthClient+generateStateCode"></a></p>
<h3 id="oauthclientgeneratestatecode-string">oAuthClient.generateStateCode() ⇒ <code>string</code><a class="headerlink" href="#oauthclientgeneratestatecode-string" title="Permanent link">&para;</a></h3>
<p>Generates a random state code to be used during the OAuth process</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a><br />
<a name="module_OAuthClient+getAuthCodeURL"></a></p>
<h3 id="oauthclientgetauthcodeurlstatecode-scopes-string">oAuthClient.getAuthCodeURL(stateCode, scopes) ⇒ <code>string</code><a class="headerlink" href="#oauthclientgetauthcodeurlstatecode-scopes-string" title="Permanent link">&para;</a></h3>
<p>Generates the URL that the user should be sent to in order to accept the app&rsquo;s permissions.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a><br />
<strong>Returns</strong>: <code>string</code> - The URL<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>NotRegisteredException</code> When the client doesn&rsquo;t have it&rsquo;s registration information</li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>stateCode</td>
<td><code>string</code></td>
<td>A random code to be included in the URl for security. Can be generated with <code>client.generateStateCode()</code></td>
</tr>
<tr>
<td>scopes</td>
<td><code>Array</code></td>
<td>= [] An array of permission scopes for the token.</td>
</tr>
</tbody>
</table>
<p><a name="module_OAuthClient+getAccessCodeFromURL"></a></p>
<h3 id="oauthclientgetaccesscodefromurlpageurl-statecode-string">oAuthClient.getAccessCodeFromURL(pageURL, stateCode) ⇒ <code>string</code><a class="headerlink" href="#oauthclientgetaccesscodefromurlpageurl-statecode-string" title="Permanent link">&para;</a></h3>
<p>Retrieves the access code contained in the URL to which the user is redirected after accepting the app&rsquo;s permissions (the <code>redirectURI</code>).</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a><br />
<strong>Returns</strong>: <code>string</code> - The access code<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>Error</code> The URL should contain the same state code as the one generated with <code>client.getAuthCodeURL()</code>. If not, it will throw an error</li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pageURL</td>
<td><code>string</code></td>
<td>The redirected page URL, containing the state code and the access code</td>
</tr>
<tr>
<td>stateCode</td>
<td><code>string</code></td>
<td>The state code that was contained in the original URL the user was sent to (see <code>client.getAuthCodeURL()</code>)</td>
</tr>
</tbody>
</table>
<p><a name="module_OAuthClient+fetchAccessToken"></a></p>
<h3 id="oauthclientfetchaccesstokenaccesscode-promise">oAuthClient.fetchAccessToken(accessCode) ⇒ <code>Promise</code><a class="headerlink" href="#oauthclientfetchaccesstokenaccesscode-promise" title="Permanent link">&para;</a></h3>
<p>Exchanges an access code for an access token. This function does <strong>not</strong> update the client&rsquo;s token.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - A promise that resolves with an AccessToken object.<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>NotRegisteredException</code> When the client doesn&rsquo;t have it&rsquo;s registration information</li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>accessCode</td>
<td><code>string</code></td>
<td>The access code contained in the redirection URL — sett <code>client.getAccessCodeFromURL()</code></td>
</tr>
</tbody>
</table>
<p><a name="module_OAuthClient+refreshToken"></a></p>
<h3 id="oauthclientrefreshtoken-promise">oAuthClient.refreshToken() ⇒ <code>Promise</code><a class="headerlink" href="#oauthclientrefreshtoken-promise" title="Permanent link">&para;</a></h3>
<p>Retrieves a new access token by refreshing the currently used token.</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - A promise that resolves with a new AccessToken object<br />
<strong>Throws</strong>:</p>
<ul>
<li><code>NotRegisteredException</code> When the client doesn&rsquo;t have it&rsquo;s registration information</li>
<li><code>Error</code> The client should already have an access token to use this function</li>
</ul>
<p><a name="module_OAuthClient+setCredentials"></a></p>
<h3 id="oauthclientsetcredentialstoken">oAuthClient.setCredentials(token)<a class="headerlink" href="#oauthclientsetcredentialstoken" title="Permanent link">&para;</a></h3>
<p>Updates the client&rsquo;s stored token</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>token</td>
<td><code>string</code></td>
<td>= null The new token to use — can be a string, a json object or an AccessToken instance.</td>
</tr>
</tbody>
</table>
<p><a name="module_OAuthClient+setOAuthOptions"></a></p>
<h3 id="oauthclientsetoauthoptionsoptions">oAuthClient.setOAuthOptions(options)<a class="headerlink" href="#oauthclientsetoauthoptionsoptions" title="Permanent link">&para;</a></h3>
<p>Updates the OAuth informations</p>
<p><strong>Kind</strong>: instance method of <a href="#module_OAuthClient"><code>OAuthClient</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>object</code></td>
<td>Map of OAuth options</td>
</tr>
</tbody>
</table>
<p><a name="module_PermissionCollection"></a></p>
<h2 id="permissioncollection">PermissionCollection<a class="headerlink" href="#permissioncollection" title="Permanent link">&para;</a></h2>
<p>Interact with permissions</p>
<p><a name="module_PermissionCollection+getOwnPermissions"></a></p>
<h3 id="permissioncollectiongetownpermissions-object">permissionCollection.getOwnPermissions() ⇒ <code>object</code><a class="headerlink" href="#permissioncollectiongetownpermissions-object" title="Permanent link">&para;</a></h3>
<p>async getOwnPermissions - Gets the permission for the current token</p>
<p><strong>Kind</strong>: instance method of <a href="#module_PermissionCollection"><code>PermissionCollection</code></a><br />
<a name="module_SharingCollection"></a></p>
<h2 id="sharingcollection">SharingCollection<a class="headerlink" href="#sharingcollection" title="Permanent link">&para;</a></h2>
<p>Interact with sharing doctypes</p>
<ul>
<li><a href="#module_SharingCollection">SharingCollection</a><ul>
<li><a href="#module_SharingCollection+share">.share(document, recipients, sharingType, description, [previewPath])</a></li>
<li><a href="#module_SharingCollection+getDiscoveryLink">.getDiscoveryLink(sharingId, sharecode)</a> ⇒ <code>string</code></li>
</ul>
</li>
</ul>
<p><a name="module_SharingCollection+share"></a></p>
<h3 id="sharingcollectionsharedocument-recipients-sharingtype-description-previewpath">sharingCollection.share(document, recipients, sharingType, description, [previewPath])<a class="headerlink" href="#sharingcollectionsharedocument-recipients-sharingtype-description-previewpath" title="Permanent link">&para;</a></h3>
<p>share - Creates a new sharing. See https://docs.cozy.io/en/cozy-stack/sharing/#post-sharings</p>
<p><strong>Kind</strong>: instance method of <a href="#module_SharingCollection"><code>SharingCollection</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>document</td>
<td><code>object</code></td>
<td></td>
<td>The document to share. Should have and _id and a name.</td>
</tr>
<tr>
<td>recipients</td>
<td><code>array</code></td>
<td></td>
<td>A list of io.cozy.contacts</td>
</tr>
<tr>
<td>sharingType</td>
<td><code>string</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>description</td>
<td><code>string</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[previewPath]</td>
<td><code>string</code></td>
<td><code>null</code></td>
<td>Relative URL of the sharings preview page</td>
</tr>
</tbody>
</table>
<p><a name="module_SharingCollection+getDiscoveryLink"></a></p>
<h3 id="sharingcollectiongetdiscoverylinksharingid-sharecode-string">sharingCollection.getDiscoveryLink(sharingId, sharecode) ⇒ <code>string</code><a class="headerlink" href="#sharingcollectiongetdiscoverylinksharingid-sharecode-string" title="Permanent link">&para;</a></h3>
<p>getDiscoveryLink - Returns the URL of the page that can be used to accept a sharing. See https://docs.cozy.io/en/cozy-stack/sharing/#get-sharingssharing-iddiscovery</p>
<p><strong>Kind</strong>: instance method of <a href="#module_SharingCollection"><code>SharingCollection</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>sharingId</td>
<td><code>string</code></td>
</tr>
<tr>
<td>sharecode</td>
<td><code>string</code></td>
</tr>
</tbody>
</table>
<p><a name="resolveClass"></a></p>
<h2 id="resolveclass">resolveClass<a class="headerlink" href="#resolveclass" title="Permanent link">&para;</a></h2>
<p>Returns the relationship class for a given doctype/type.</p>
<p>In the schema definition, some classes have string aliases
so you do not have to import directly the association.</p>
<p>Some doctypes can have built-in overriden relationships.</p>
<p><strong>Kind</strong>: global constant<br />
<a name="encode"></a></p>
<h2 id="encode">encode<a class="headerlink" href="#encode" title="Permanent link">&para;</a></h2>
<p>Encode an object as querystring, values are encoded as
URI components, keys are not.</p>
<p><strong>Kind</strong>: global constant<br />
<a name="buildURL"></a></p>
<h2 id="buildurl">buildURL<a class="headerlink" href="#buildurl" title="Permanent link">&para;</a></h2>
<p>Returns a URL from base url and a query parameter object.
Any undefined parameter is removed.</p>
<p><strong>Kind</strong>: global constant<br />
<a name="addById"></a></p>
<h2 id="addbyid">addById()<a class="headerlink" href="#addbyid" title="Permanent link">&para;</a></h2>
<p>Add a referenced document by id. You need to call save()
in order to synchronize your document with the store</p>
<p><strong>Kind</strong>: global function<br />
<strong>Todo</strong></p>
<ul>
<li>[ ] We shouldn&rsquo;t create the array of relationship manually since
it&rsquo;ll not be present in the store as well.
We certainly should use something like <code>updateRelationship</code></li>
</ul>
<p><a name="withClient"></a></p>
<h2 id="withclientcomponent-function">withClient(Component) ⇒ <code>function</code><a class="headerlink" href="#withclientcomponent-function" title="Permanent link">&para;</a></h2>
<p>HOC to provide client from context as prop</p>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>function</code> - - Component that will receive client as prop  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Component</td>
<td><code>Component</code></td>
<td>wrapped component</td>
</tr>
</tbody>
</table>
<p><a name="queryConnect"></a></p>
<h2 id="queryconnectqueryspecs-function">queryConnect(querySpecs) ⇒ <code>function</code><a class="headerlink" href="#queryconnectqueryspecs-function" title="Permanent link">&para;</a></h2>
<p>HOC creator to connect component to several queries in a declarative manner</p>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>function</code> - - HOC to apply to a component  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>querySpecs</td>
<td><code>object</code></td>
<td>Definition of the queries</td>
</tr>
</tbody>
</table>
<p><a name="optimizeDoctypeQueries"></a></p>
<h2 id="optimizedoctypequeriesqueries-arrayquerydefinition">optimizeDoctypeQueries(queries) ⇒ <code>Array.&lt;QueryDefinition&gt;</code><a class="headerlink" href="#optimizedoctypequeriesqueries-arrayquerydefinition" title="Permanent link">&para;</a></h2>
<p>Optimize queries on a single doctype</p>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>Array.&lt;QueryDefinition&gt;</code> - Optimized queries  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>queries</td>
<td><code>Array.&lt;QueryDefinition&gt;</code></td>
<td>Queries of a same doctype</td>
</tr>
</tbody>
</table>
<p><a name="optimizeQueries"></a></p>
<h2 id="optimizequeriesqueries-arrayquerydefinition">optimizeQueries(queries) ⇒ <code>Array.&lt;QueryDefinition&gt;</code><a class="headerlink" href="#optimizequeriesqueries-arrayquerydefinition" title="Permanent link">&para;</a></h2>
<p>Reduce the number of queries used to fetch documents.</p>
<ul>
<li>Deduplication of queries</li>
<li>Groups id queries</li>
</ul>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>Array.&lt;QueryDefinition&gt;</code> - Optimized queries  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>queries</td>
<td><code>Array.&lt;QueryDefinition&gt;</code></td>
<td>Queries to optimized</td>
</tr>
</tbody>
</table>
<p><a name="normalizeDoctypeSchema"></a></p>
<h2 id="normalizedoctypeschema">normalizeDoctypeSchema()<a class="headerlink" href="#normalizedoctypeschema" title="Permanent link">&para;</a></h2>
<p>Returns a normalized schema object from the schema definition.</p>
<ul>
<li>Relationships are resolved to classes if needed</li>
<li>The name of the relationship (its key in the schema definition)
  is included in the relationship</li>
<li>Empty relationships are nulled</li>
</ul>
<p><strong>Kind</strong>: global function<br />
<a name="getDoctypeSchema"></a></p>
<h2 id="getdoctypeschema">getDoctypeSchema()<a class="headerlink" href="#getdoctypeschema" title="Permanent link">&para;</a></h2>
<p>Returns the schema for a doctype</p>
<p><strong>Kind</strong>: global function<br />
<a name="getRelationship"></a></p>
<h2 id="getrelationship">getRelationship()<a class="headerlink" href="#getrelationship" title="Permanent link">&para;</a></h2>
<p>Returns the relationship for a given doctype/name</p>
<p><strong>Kind</strong>: global function<br />
<a name="validate"></a></p>
<h2 id="validate">validate()<a class="headerlink" href="#validate" title="Permanent link">&para;</a></h2>
<p>Validates a document considering the descriptions in schema.attributes.</p>
<p><strong>Kind</strong>: global function<br />
<a name="handleOnSync"></a></p>
<h2 id="handleonsync">handleOnSync()<a class="headerlink" href="#handleonsync" title="Permanent link">&para;</a></h2>
<p>Receives PouchDB updates (documents grouped by doctype).
Normalizes the data (.id -&gt; ._id, .rev -&gt; _rev).
Passes the data to the client and to the onSync handler.</p>
<p><strong>Kind</strong>: global function<br />
<a name="startReplication"></a></p>
<h2 id="startreplication-void">startReplication() ⇒ <code>void</code><a class="headerlink" href="#startreplication-void" title="Permanent link">&para;</a></h2>
<p>User of the link can call this to start ongoing replications.
Typically, it can be used when the application regains focus.</p>
<p><strong>Kind</strong>: global function<br />
<strong>Access</strong>: public<br />
<a name="stopReplication"></a></p>
<h2 id="stopreplication-void">stopReplication() ⇒ <code>void</code><a class="headerlink" href="#stopreplication-void" title="Permanent link">&para;</a></h2>
<p>User of the link can call this to stop ongoing replications.
Typically, it can be used when the applications loses focus.</p>
<p><strong>Kind</strong>: global function<br />
<strong>Access</strong>: public<br />
<a name="defaultSelector"></a></p>
<h2 id="defaultselectoroptions-array">defaultSelector(options) ⇒ <code>Array</code><a class="headerlink" href="#defaultselectoroptions-array" title="Permanent link">&para;</a></h2>
<p>Compute fields that should be indexed for a mango
query to work</p>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>Array</code> - - Fields to index  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td>Mango query options</td>
</tr>
</tbody>
</table>
<p><a name="ensureDatabasesExist"></a></p>
<h2 id="ensuredatabasesexist">ensureDatabasesExist()<a class="headerlink" href="#ensuredatabasesexist" title="Permanent link">&para;</a></h2>
<p>Via a call to info() we ensure the database exist on the
remote side. This is done only once since after the first
call, we are sure that the databases have been created.</p>
<p><strong>Kind</strong>: global function<br />
<a name="startReplicationLoop"></a></p>
<h2 id="startreplicationloop">startReplicationLoop()<a class="headerlink" href="#startreplicationloop" title="Permanent link">&para;</a></h2>
<p>Starts periodic syncing of the pouches</p>
<p><strong>Kind</strong>: global function<br />
<a name="stopReplicationLoop"></a></p>
<h2 id="stopreplicationloop">stopReplicationLoop()<a class="headerlink" href="#stopreplicationloop" title="Permanent link">&para;</a></h2>
<p>Stop periodic syncing of the pouches</p>
<p><strong>Kind</strong>: global function<br />
<a name="replicateOnce"></a></p>
<h2 id="replicateonce">replicateOnce()<a class="headerlink" href="#replicateonce" title="Permanent link">&para;</a></h2>
<p>Starts replication</p>
<p><strong>Kind</strong>: global function<br />
<a name="setIntervalPromise"></a></p>
<h2 id="setintervalpromise">setIntervalPromise()<a class="headerlink" href="#setintervalpromise" title="Permanent link">&para;</a></h2>
<p>Will periodically run a function so that when the promise
is resolved, the next function is called after <delay>ms.</p>
<p>Returns a function which cancels the periodic calling.
When canceled, if there is an ongoing promise, it will
continue.</p>
<p><strong>Kind</strong>: global function<br />
<a name="uri"></a></p>
<h2 id="uri">uri()<a class="headerlink" href="#uri" title="Permanent link">&para;</a></h2>
<p>Template tag function for URIs encoding</p>
<p>Will automatically apply <code>encodeURIComponent</code> to template literal placeholders</p>
<p><strong>Kind</strong>: global function<br />
<strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span>const safe = uri`/data/<span class="cp">${</span><span class="n">doctype</span><span class="cp">}</span>/_all_docs?limit=<span class="cp">${</span><span class="n">limit</span><span class="cp">}</span>`
</pre></div>


<p><a name="attempt"></a></p>
<h2 id="attempt">attempt()<a class="headerlink" href="#attempt" title="Permanent link">&para;</a></h2>
<p>Helps to avoid nested try/catch when using async/await</p>
<p>Inspired by a Go pattern: http://blog.grossman.io/how-to-write-async-await-without-try-catch-blocks-in-javascript/</p>
<p><strong>Kind</strong>: global function<br />
<strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span>if (await attempt(collection.all()) return
await sleep(1000)
if (await attempt(collection.all()) return
await sleep(1000)
return
</pre></div>


<p><a name="sleep"></a></p>
<h2 id="sleep">sleep()<a class="headerlink" href="#sleep" title="Permanent link">&para;</a></h2>
<p>Helps to avoid nested try/catch when using async/await — see documentation for attemp</p>
<p><strong>Kind</strong>: global function  </p>
                </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <!-- Piwik -->
        <script type="text/javascript">
          var _paq = _paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(['trackPageView']);
          _paq.push(['enableLinkTracking']);
          (function() {
            var u="//matomo.cozycloud.cc/";
            _paq.push(['setTrackerUrl', u+'piwik.php']);
            _paq.push(['setSiteId', '7']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
          })();
        </script>
        <noscript><p><img src="//matomo.cozycloud.cc/piwik.php?idsite=7&rec=1" style="border:0;" alt="" /></p></noscript>
        <!-- End Piwik Code -->
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../extra.js"></script>
        <script src="../../search/main.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
